# 验证用例: v2 `manual` 工具集

- **目的**: 验证 v2 服务器能否正确加载、注册并执行 `manual` 系列工具。
- **前置条件**:
    - 项目已成功构建 (`bun run build`)。
    - 存在一个用于测试的知识库目录，例如 `./test-library`。
    - 该目录中包含一个 `meta.md` 文件。

---

### 用例 1: `tools/list` 能列出 `manual` 工具

1.  **执行操作**:
    ```bash
    (sleep 1; echo '{"jsonrpc":"2.0","id":"1","method":"tools/list"}') | MEM_VERSION=2 bun ./dist/index.js --libraries test:./test-library
    ```
2.  **预期结果**:
    -   服务应返回一个 JSON-RPC 响应。
    -   响应的 `result.tools` 数组中应包含名为 `ReadManual` 和 `UpdateManualSection` 的工具定义。

---

### 用例 2: `tool/call` 能成功执行 `read_manual`

1.  **执行操作**:
    ```bash
    (sleep 1; echo '{"jsonrpc":"2.0","id":"2","method":"tool/call","params":{"name":"ReadManual","arguments":{"libraryName":"test"}}}') | MEM_VERSION=2 bun ./dist/index.js --libraries test:./test-library
    ```
2.  **预期结果**:
    -   服务应返回一个 JSON-RPC 响应。
    -   响应的 `result.content[0].text` 字段应包含 `./test-library/meta.md` 文件的完整内容。
