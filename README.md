# mcp-server-memories-off

## 典型 prompt

```plain
用各种不同话题和我聊天，了解我的工作、组织、团队等各种知识，更新关于我的工作知识图谱。
讨论期间，你要从 memory tool 获取已有信息，和我互动。在了解我的信息时，搜索「我」而不是「你」这种代称。
多搜索宽泛简短的关键词。重点识别挖掘和我相关的各种人、项目、团队等信息，也要关联已有的实体之间的联系。
将新发现的知识通过 memory tool 记录下来。
除了上述要求，如果我发给你聊天记录，将我（四盘）的对话风格，记录在「语气」类别的知识实体中，并选择一些我说的话，一字不差记录在「对话记录」类型的知识实体中。未来我需要你模仿我的语气。
```

## 项目愿景

提供一个轻量级知识管理 MCP 服务，让你的 LLM 长期持续学习和输出知识。

该服务希望帮助个人和团队从日常文本、对话、项目笔记等，自动化、结构化地提取和整合知识。目标是让知识捕捉与整理变得顺畅，也许能让 LLM 为每个人个性化的知识助手，提升沟通与协作效率，并在助力沟通、管理、项目梳理、知识整理等方面有应用空间。

初始版本基于 Anthropic 的 memory-mcp 迭代。如果有想法和需求，欢迎提出 issue 或提交 merge request。

## 功能愿景

- **自动结构化知识**：通过 LLM 能力，将各种文本中的信息转化为实体、关系、观察，构建个人知识图谱。

- **简洁的图谱接口**：支持实体、关系的增删查改，便于个性化管理和自动化操作。

- **可配置与多实例支持**：自定义数据文件路径，多图谱独立维护，适合不同场景领域的知识管理。

- **灵活检索与模糊搜索**：支持通过实体名、类型、观察内容的关键词快速检索，提升知识发现效率。

- **备份与还原**：提供备份能力以避免删除等变更出现问题。

## 应用例子

### 个人使用场景

- **提取知识**：将文档、日常对话或大段聊天记录发给 LLM，自动提取关键知识点、人物、项目信息、协作关系、个人风格等，构建你的专属知识库。
- **个性化内容生成**：借助知识图谱，LLM 能更好地理解你的思考习惯和人际网络，有针对性地模仿你的表达，生成符合你个性风格的沟通、总结或项目文档。

### 项目使用场景

- **项目知识库**：小团队可用作项目级别的知识库，持续积累和管理知识，比如联合支付能力 mcp server，自动化记录用户购物偏好、行为习惯等。
- **agent 学习**：让你的智能 agent 不断学习历史数据与业务诉求，动态调整流程或输出，如自动转化并优化支付 mcp 步骤，提高应用场景中的转化率与满意度。

## Todo List

计划逐步实现一些便利工具，如下为主要 todolist：

- **配置能力**
  - [x] 支持自定义知识图谱存储路径
  - [ ] 支持自定义工具集介绍，便于多领域知识联动

- **模糊搜索**
  - [x] 通过逗号或空格分词搜索
  - [x] read_subgraph：获取以某节点为中心的子知识图
  - [ ] 给 read_subgraph 增加搜索深度限制以避免过大图谱
  - [ ] 本地的向量搜索，使用 sqlite_vec 等轻量级 embedding 和搜索解决方案

- **知识融合与整理**
  - [ ] list_orphan_entities: 支持列出零散（无关系）的实体
  - [ ] merge_entities: 合并实体
  - [ ] list_all_entity_types: 列出所有实体类型
  - [ ] list_most_entity_types: 列出最多的实体类型
  - [ ] merge_entity_types: 合并实体类型
  - [ ] list_all_relation_types: 列出所有关系类型
  - [ ] list_most_relation_types: 列出最多的关系类型
  - [ ] merge_relation_types: 合并关系类型

- **安全节约**
  - [x] 接口返回格式从 json 切换为更省 token（钱）的 yaml
  - [x] backup_graph: 备份整个图

- **时间线相关**
  - [ ] 给所有记录添加日期
  - [ ] 给 get_entities, search_entities 等「信息获取」类工具的返回值中添加当前日期

## 配置例子

构建：

`bun run build`

运行：

`node ..../dist/index.js`

环境变量：

| 环境变量      | 说明                         | 默认值                             |
|---------------|------------------------------|---------------------------------|
| MEM_NAME      | 工具名称                     | memory                          |
| MEM_PATH      | 知识图谱存储文件路径         | $HOME/mcp-server-memories-off.yaml |
| MEM_LOG_DIR   | 日志文件目录                 | 系统临时目录（如 \tmp\）                 |

典型 prompt：
